<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Welcome | All-In Chat Poker</title>
  <link rel="icon" type="image/png" href="logo.png">
  <link rel="stylesheet" href="style-theme.css">
  <link rel="stylesheet" href="style-welcome.css">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6226206359050540" crossorigin="anonymous"></script>
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <div class="tag">All-In Chat Poker</div>
      <h1>Bring Twitch Chat to the Table</h1>
      <p class="lede">
        Spin up live Blackjack and Video Poker rounds where viewers join with <code>!join</code> or place bets right from chat. Drop the overlay into OBS, start rounds from the admin panel, and let the hype take over.
      </p>
      <div class="pill status-pill">Status: Alpha testing (multi-stream lobbies + avatars)</div>
      <div class="button-row">
        <a class="btn" href="/obs-overlay.html" target="_blank" rel="noopener">Launch OBS Overlay</a>
        <a class="btn" href="/admin2.html" target="_blank" rel="noopener">Open Admin Dashboard</a>
        <a class="btn" href="/setup.html" target="_blank" rel="noopener">Setup Guide</a>
        <a class="btn btn-ghost" href="https://paypal.me/allinchatpoker" target="_blank" rel="noopener">Support on PayPal</a>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <h2>Why it's fun</h2>
        <ul>
          <li>Chat becomes the table—viewers jump in with one command.</li>
          <li>Bold OBS overlay with avatars, seating, and live pot glow.</li>
          <li>Blackjack and poker flows you control from one panel.</li>
        </ul>
      </div>

      <div class="card">
        <h2>Quick start</h2>
        <ul>
          <li>OBS: Browser Source → <code>https://all-in-chat-poker.fly.dev/obs-overlay.html</code></li>
          <li>Auto-join: when the streamer logs in, their channel is added for the bot.</li>
        </ul>
      </div>

      <div class="card">
        <h2>Support the table</h2>
        <p class="muted">If you’re vibing with All-In Chat Poker (powered by allinchatpokerbot), toss a tip to keep the felt glowing.</p>
        <div id="paypal-donate" style="max-width:320px;"></div>
      </div>

    </div>

    <div class="card" style="margin-top:18px;">
      <h2>Vibes from the felt</h2>
      <p class="muted">Game stills from the overlay—card backs, default avatars, and the neon table energy.</p>
      <div class="gallery">
        <img src="/assets/card-back.png" alt="Card back">
        <div class="gallery-box">
          <div class="fake-table">
            <div class="fake-seat">Riley</div>
            <div class="fake-seat">Nova</div>
            <div class="fake-seat">Kai</div>
            <div class="fake-seat">Ember</div>
            <div class="fake-seat">Jax</div>
          </div>
          <small class="muted">Sample table with default avatar colors + made-up names.</small>
        </div>
        <img src="/logo.png" alt="All-In Chat Poker logo" style="object-fit:contain; background:#0a1a1a; padding:12px;">
      </div>
    </div>

    <div class="card suggestion-card" style="margin-top:18px;">
      <h2>Suggestion box</h2>
      <p class="muted">Have an idea or spotted a bug? Send it straight to the team.</p>
      <div class="suggestion-form">
        <input id="suggestion-name" type="text" placeholder="Your name (optional)" class="form-control">
        <textarea id="suggestion-text" rows="3" placeholder="Share feedback, feature ideas, or issues..." class="form-control"></textarea>
        <button id="send-suggestion" class="btn">Email feedback</button>
      </div>
    </div>
  </div>

  <script>
    (function () {
      const btn = document.getElementById('send-suggestion');
      if (!btn) return;
      btn.addEventListener('click', () => {
        const name = document.getElementById('suggestion-name')?.value.trim();
        const message = document.getElementById('suggestion-text')?.value.trim();
        if (!message) {
          alert('Please add a quick message before sending.');
          return;
        }
        const subject = encodeURIComponent('All-In Chat Poker suggestion');
        const bodyLines = [
          name ? 'From: ' + name : '',
          '',
          message
        ].filter(Boolean);
        const body = encodeURIComponent(bodyLines.join('\n'));
        window.location.href = 'mailto:allinchatpoker@gmail.com?subject=' + subject + '&body=' + body;
      });
    })();

    // PayPal donation setup (uses server-side order create/capture)
    (async function setupPayPalDonate() {
      try {
        const cfgRes = await fetch('/public-config.json');
        const cfg = cfgRes.ok ? await cfgRes.json() : {};
        if (!cfg.paypalClientId) return;

        const donateContainer = document.getElementById('paypal-donate');
        if (!donateContainer) return;

        const sdkScript = document.createElement('script');
        sdkScript.src = `https://www.paypal.com/sdk/js?client-id=${encodeURIComponent(cfg.paypalClientId)}&currency=USD`;
        sdkScript.async = true;
        sdkScript.onload = () => {
          if (!window.paypal) return;
          window.paypal.Buttons({
            style: { shape: 'pill', color: 'gold', layout: 'vertical', label: 'donate' },
            createOrder: async () => {
              const res = await fetch('/paypal/order', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ amount: '5.00' }),
              });
              const data = await res.json();
              return data.id;
            },
            onApprove: async (data) => {
              await fetch(`/paypal/order/${data.orderID}/capture`, { method: 'POST' });
              alert('Thanks for supporting the table!');
            },
            onError: (err) => {
              console.error('PayPal error', err);
              alert('PayPal donation failed. Please try again.');
            },
          }).render(donateContainer);
        };
        document.body.appendChild(sdkScript);
      } catch (e) {
        // ignore
      }
    })();
  </script>
</body>
</html>
