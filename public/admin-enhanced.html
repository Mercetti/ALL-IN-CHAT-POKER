<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard - Enhanced | All-In Chat Poker</title>
  <link rel="icon" type="image/png" href="logo.png">
  <link rel="stylesheet" href="style-theme.css">
  <link rel="stylesheet" href="style-admin-enhanced.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Animated Background -->
  <div class="enhanced-background">
    <div class="floating-cards">
      <div class="floating-card card-1">‚ô†</div>
      <div class="floating-card card-2">‚ô•</div>
      <div class="floating-card card-3">‚ô¶</div>
      <div class="floating-card card-4">‚ô£</div>
      <div class="floating-card card-5">üëë</div>
    </div>
    <div class="gradient-orbs">
      <div class="orb orb-1"></div>
      <div class="orb orb-2"></div>
      <div class="orb orb-3"></div>
    </div>
  </div>

  <div class="main-container">
    <!-- Enhanced Header -->
    <header class="enhanced-header">
      <div class="header-content">
        <div class="logo-section">
          <div class="logo">
            <div class="logo-icon">üé∞</div>
            <div class="logo-text">
              <h1>ALL-IN POKER</h1>
              <span class="logo-subtitle">Admin Dashboard</span>
            </div>
          </div>
        </div>
        
        <nav class="header-nav">
          <div class="nav-pills">
            <button class="nav-pill active" data-tab="dashboard">
              <span class="nav-icon">üìä</span>
              <span>Dashboard</span>
            </button>
            <button class="nav-pill" data-tab="game">
              <span class="nav-icon">üéÆ</span>
              <span>Game Control</span>
            </button>
            <button class="nav-pill" data-tab="partners">
              <span class="nav-icon">ü§ù</span>
              <span>Partners</span>
            </button>
            <button class="nav-pill" data-tab="cosmetics">
              <span class="nav-icon">‚ú®</span>
              <span>Cosmetics</span>
            </button>
            <button class="nav-pill" data-tab="users">
              <span class="nav-icon">üë•</span>
              <span>Users</span>
            </button>
          </div>
        </nav>

        <div class="header-actions">
          <div class="status-indicators">
            <div class="status-pill">
              <span class="status-dot online"></span>
              <span id="session-status">Session Active</span>
            </div>
            <div class="status-pill">
              <span id="player-count">0 Players</span>
            </div>
            <div class="status-pill">
              <span id="current-pot">Pot: 0 AIC</span>
            </div>
          </div>
          
          <div class="action-buttons">
            <button class="btn btn-secondary btn-sm" id="profile-btn">
              <span class="btn-icon">üë§</span>
              <span>Profile</span>
            </button>
            <button class="btn btn-secondary btn-sm" id="overlay-editor-btn">
              <span class="btn-icon">üé®</span>
              <span>Overlay Editor</span>
            </button>
            <button class="btn btn-secondary btn-sm" id="theme-toggle">
              <span class="btn-icon">üåô</span>
            </button>
            <button class="btn btn-secondary btn-sm" id="obs-overlay">
              <span class="btn-icon">üì∫</span>
              <span>OBS</span>
            </button>
            <button class="btn btn-danger btn-sm" id="logout-btn">
              <span class="btn-icon">üö™</span>
              <span>Logout</span>
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content Area -->
    <main class="main-content">
      <!-- Dashboard Tab -->
      <div class="tab-content active" id="dashboard-tab">
        <!-- Stats Overview -->
        <section class="stats-overview">
          <div class="stat-card">
            <div class="stat-icon">üë•</div>
            <div class="stat-content">
              <div class="stat-number" id="total-players">0</div>
              <div class="stat-label">Total Players</div>
              <div class="stat-change positive" id="players-change">+0%</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">üí∞</div>
            <div class="stat-content">
              <div class="stat-number" id="total-balance">0 AIC</div>
              <div class="stat-label">Total Balance</div>
              <div class="stat-change positive" id="balance-change">+0%</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">üèÜ</div>
            <div class="stat-content">
              <div class="stat-number" id="top-winner">-</div>
              <div class="stat-label">Top Winner</div>
              <div class="stat-change" id="winner-winnings">$0</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">üéØ</div>
            <div class="stat-content">
              <div class="stat-number" id="active-games">0</div>
              <div class="stat-label">Active Games</div>
              <div class="stat-change" id="games-status">Live</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">ü§ù</div>
            <div class="stat-content">
              <div class="stat-number" id="active-partners">0</div>
              <div class="stat-label">Active Partners</div>
              <div class="stat-change" id="partners-status">Online</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">‚ö°</div>
            <div class="stat-content">
              <div class="stat-number" id="system-health">100%</div>
              <div class="stat-label">System Health</div>
              <div class="stat-change positive" id="health-status">Optimal</div>
            </div>
          </div>
        </section>

        <!-- Quick Actions -->
        <section class="quick-actions-panel">
          <div class="panel-header">
            <h2>Quick Actions</h2>
            <p class="panel-subtitle">Frequently used admin functions</p>
          </div>
          
          <div class="action-grid">
            <button class="action-card" id="quick-start-round">
              <div class="action-icon">‚ñ∂Ô∏è</div>
              <div class="action-content">
                <div class="action-title">Start Round</div>
                <div class="action-desc">Begin a new game round</div>
              </div>
            </button>
            
            <button class="action-card" id="quick-add-chips">
              <div class="action-icon">üíµ</div>
              <div class="action-content">
                <div class="action-title">Add Chips</div>
                <div class="action-desc">Adjust player balance</div>
              </div>
            </button>
            
            <button class="action-card" id="quick-create-lobby">
              <div class="action-icon">üè†</div>
              <div class="action-content">
                <div class="action-title">Create Lobby</div>
                <div class="action-desc">Multi-stream lobby</div>
              </div>
            </button>
            
            <button class="action-card" id="quick-refresh-data">
              <div class="action-icon">üîÑ</div>
              <div class="action-content">
                <div class="action-title">Refresh Data</div>
                <div class="action-desc">Update all statistics</div>
              </div>
            </button>
            
            <button class="action-card" id="quick-export">
              <div class="action-icon">üì§</div>
              <div class="action-content">
                <div class="action-title">Export Data</div>
                <div class="action-desc">Download reports</div>
              </div>
            </button>
            
            <button class="action-card" id="quick-ai-test">
              <div class="action-icon">ü§ñ</div>
              <div class="action-content">
                <div class="action-title">AI Test</div>
                <div class="action-desc">Run system diagnostics</div>
              </div>
            </button>
          </div>
        </section>

        <!-- Recent Activity -->
        <section class="activity-panel">
          <div class="panel-header">
            <h2>Recent Activity</h2>
            <div class="panel-controls">
              <select class="filter-select" id="activity-filter">
                <option value="all">All Activity</option>
                <option value="games">Games</option>
                <option value="users">Users</option>
                <option value="system">System</option>
              </select>
              <button class="btn btn-secondary btn-sm" id="refresh-activity">
                <span class="btn-icon">üîÑ</span>
              </button>
            </div>
          </div>
          
          <div class="activity-feed" id="activity-list">
            <!-- Activity items will be populated here -->
            <div class="activity-item">
              <div class="activity-icon">üéÆ</div>
              <div class="activity-content">
                <div class="activity-title">Game Started</div>
                <div class="activity-desc">New blackjack round began</div>
                <div class="activity-time">2 minutes ago</div>
              </div>
            </div>
            
            <div class="activity-item">
              <div class="activity-icon">üë§</div>
              <div class="activity-content">
                <div class="activity-title">User Joined</div>
                <div class="activity-desc">player123 joined the game</div>
                <div class="activity-time">5 minutes ago</div>
              </div>
            </div>
            
            <div class="activity-item">
              <div class="activity-icon">üí∞</div>
              <div class="activity-content">
                <div class="activity-title">Big Win</div>
                <div class="activity-desc">winner456 won $500</div>
                <div class="activity-time">8 minutes ago</div>
              </div>
            </div>
          </div>
        </section>
      </div>

      <!-- Game Control Tab -->
      <div class="tab-content" id="game-tab">
        <section class="game-control-panel">
          <div class="panel-header">
            <h2>Game Control</h2>
            <p class="panel-subtitle">Manage active games and rounds</p>
          </div>
          
          <!-- Game Status -->
          <div class="game-status-card">
            <div class="status-header">
              <h3>Current Game</h3>
              <div class="game-phase" id="game-phase">Betting</div>
            </div>
            
            <div class="game-metrics">
              <div class="metric">
                <span class="metric-label">Round</span>
                <span class="metric-value" id="round-number">1</span>
              </div>
              <div class="metric">
                <span class="metric-label">Players</span>
                <span class="metric-value" id="round-players">0</span>
              </div>
              <div class="metric">
                <span class="metric-label">Pot</span>
                <span class="metric-value" id="round-pot">$0</span>
              </div>
              <div class="metric">
                <span class="metric-label">Timer</span>
                <span class="metric-value" id="round-timer">00:00</span>
              </div>
            </div>
            
            <div class="game-controls">
              <button class="btn btn-primary" id="start-round-btn">Start Round</button>
              <button class="btn btn-success" id="start-now-btn">Start Now</button>
              <button class="btn btn-secondary" id="process-draw-btn">Process Draw</button>
              <button class="btn btn-warning" id="reset-game-btn">Reset Game</button>
            </div>
          </div>
          
          <!-- Player Management -->
          <div class="player-management-card">
            <div class="card-header">
              <h3>Player Management</h3>
              <button class="btn btn-secondary btn-sm" id="add-ai-btn">Add 3 AI Players</button>
            </div>
            
            <div class="player-adjust-form">
              <div class="form-row">
                <div class="form-group">
                  <label for="player-username">Username</label>
                  <input type="text" id="player-username" class="form-input" placeholder="Enter username">
                </div>
                <div class="form-group">
                  <label for="chip-amount">Amount</label>
                  <input type="number" id="chip-amount" class="form-input" placeholder="500">
                </div>
                <div class="form-group">
                  <label for="adjust-mode">Mode</label>
                  <select id="adjust-mode" class="form-input">
                    <option value="add">Add Chips</option>
                    <option value="set">Set Balance</option>
                    <option value="remove">Remove Chips</option>
                  </select>
                </div>
                <button class="btn btn-primary" id="apply-chips-btn">Apply</button>
              </div>
            </div>
            
            <div class="player-list">
              <div class="list-header">
                <h4>Active Players</h4>
                <div class="list-controls">
                  <input type="text" class="search-input" id="player-search" placeholder="Search players...">
                  <button class="btn btn-secondary btn-sm" id="refresh-players">Refresh</button>
                </div>
              </div>
              
              <div class="player-table-container">
                <table class="data-table" id="players-table">
                  <thead>
                    <tr>
                      <th>Username</th>
                      <th>Balance</th>
                      <th>Status</th>
                      <th>Last Action</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody id="players-tbody">
                    <tr><td colspan="5" class="no-data">No active players</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          
          <!-- Lobby Management -->
          <div class="lobby-management-card">
            <div class="card-header">
              <h3>Multi-Stream Lobby</h3>
              <p class="card-subtitle">Create and manage shared lobbies</p>
            </div>
            
            <div class="lobby-controls">
              <div class="form-row">
                <button class="btn btn-primary" id="create-lobby-btn">Create Lobby</button>
                <input type="text" id="lobby-code" class="form-input" readonly placeholder="Lobby code appears here">
                <button class="btn btn-secondary" id="copy-lobby-btn">Copy Code</button>
              </div>
              
              <div class="form-row">
                <input type="text" id="join-lobby-code" class="form-input" placeholder="Enter lobby code to join">
                <button class="btn btn-success" id="join-lobby-btn">Join Lobby</button>
              </div>
            </div>
            
            <div class="lobby-info">
              <div class="info-item">
                <span class="info-label">Current Lobby:</span>
                <span class="info-value" id="current-lobby">None</span>
              </div>
              <div class="info-item">
                <span class="info-label">Connected Streams:</span>
                <span class="info-value" id="connected-streams">0</span>
              </div>
            </div>
          </div>
        </section>
      </div>

      <!-- Partners Tab -->
      <div class="tab-content" id="partners-tab">
        <section class="partners-panel">
          <div class="panel-header">
            <h2>Partner Management</h2>
            <div class="panel-controls">
              <button class="btn btn-primary btn-sm" id="add-partner-btn">Add Partner</button>
              <button class="btn btn-secondary btn-sm" id="export-partners-btn">Export</button>
            </div>
          </div>
          
          <!-- Partner Stats -->
          <div class="partner-stats-grid">
            <div class="partner-stat-card">
              <div class="stat-icon">üë•</div>
              <div class="stat-content">
                <div class="stat-number" id="total-partners">0</div>
                <div class="stat-label">Total Partners</div>
              </div>
            </div>
            
            <div class="partner-stat-card">
              <div class="stat-icon">üí∞</div>
              <div class="stat-content">
                <div class="stat-number" id="partner-revenue">$0</div>
                <div class="stat-label">Monthly Revenue</div>
              </div>
            </div>
            
            <div class="partner-stat-card">
              <div class="stat-icon">üìà</div>
              <div class="stat-content">
                <div class="stat-number" id="active-streams">0</div>
                <div class="stat-label">Active Streams</div>
              </div>
            </div>
            
            <div class="partner-stat-card">
              <div class="stat-icon">üéØ</div>
              <div class="stat-content">
                <div class="stat-number" id="conversion-rate">0%</div>
                <div class="stat-label">Conversion Rate</div>
              </div>
            </div>
          </div>
          
          <!-- Partner Table -->
          <div class="partner-table-card">
            <div class="table-header">
              <h3>Partner Directory</h3>
              <div class="table-controls">
                <input type="text" class="search-input" id="partner-search" placeholder="Search partners...">
                <select class="filter-select" id="partner-tier-filter">
                  <option value="all">All Tiers</option>
                  <option value="affiliate">Affiliate</option>
                  <option value="partner">Partner</option>
                  <option value="premier">Premier</option>
                </select>
                <button class="btn btn-secondary btn-sm" id="refresh-partners">Refresh</button>
              </div>
            </div>
            
            <div class="table-container">
              <table class="data-table" id="partners-table">
                <thead>
                  <tr>
                    <th>Partner</th>
                    <th>Tier</th>
                    <th>Streams (30d)</th>
                    <th>Avg Viewers</th>
                    <th>Revenue</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="partners-tbody">
                  <tr><td colspan="7" class="no-data">No partners found</td></tr>
                </tbody>
              </table>
            </div>
          </div>
          
          <!-- Partner Applications -->
          <div class="applications-card">
            <div class="card-header">
              <h3>Pending Applications</h3>
              <div class="badge" id="pending-count">0</div>
            </div>
            
            <div class="applications-list" id="applications-list">
              <!-- Applications will be populated here -->
              <div class="no-data">No pending applications</div>
            </div>
          </div>
        </section>
      </div>

      <!-- Cosmetics Tab -->
      <div class="tab-content" id="cosmetics-tab">
        <section class="cosmetics-panel">
          <div class="panel-header">
            <h2>Cosmetic Management</h2>
            <div class="panel-controls">
              <button class="btn btn-primary btn-sm" id="import-cosmetics-btn">Import</button>
              <button class="btn btn-secondary btn-sm" id="export-cosmetics-btn">Export</button>
            </div>
          </div>
          
          <!-- Premier Review -->
          <div class="premier-review-card">
            <div class="card-header">
              <h3>Premier Review</h3>
              <p class="card-subtitle">Review and approve cosmetic submissions</p>
            </div>
            
            <div class="review-controls">
              <select class="form-input" id="proposal-select">
                <option value="">Select a proposal to review</option>
              </select>
              <button class="btn btn-secondary btn-sm" id="refresh-proposals">Refresh</button>
            </div>
            
            <div class="proposal-preview" id="proposal-preview">
              <div class="no-data">Select a proposal to preview</div>
            </div>
            
            <div class="review-actions">
              <button class="btn btn-info btn-sm" id="test-proposal">Test on Overlay</button>
              <button class="btn btn-success btn-sm" id="approve-proposal">Approve</button>
              <button class="btn btn-warning btn-sm" id="reject-proposal">Reject</button>
            </div>
          </div>
          
          <!-- Cosmetic Catalog -->
          <div class="catalog-card">
            <div class="table-header">
              <h3>Cosmetic Catalog</h3>
              <div class="table-controls">
                <input type="text" class="search-input" id="cosmetic-search" placeholder="Search cosmetics...">
                <select class="filter-select" id="cosmetic-type-filter">
                  <option value="all">All Types</option>
                  <option value="cardBack">Card Backs</option>
                  <option value="avatarRing">Avatar Rings</option>
                  <option value="tableSkin">Table Skins</option>
                  <option value="chipSkin">Chip Skins</option>
                </select>
                <button class="btn btn-secondary btn-sm" id="refresh-cosmetics">Refresh</button>
              </div>
            </div>
            
            <div class="table-container">
              <table class="data-table" id="cosmetics-table">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Price</th>
                    <th>Rarity</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="cosmetics-tbody">
                  <tr><td colspan="6" class="no-data">No cosmetics found</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>
      </div>

      <!-- Users Tab -->
      <div class="tab-content" id="users-tab">
        <section class="users-panel">
          <div class="panel-header">
            <h2>User Management</h2>
            <div class="panel-controls">
              <button class="btn btn-primary btn-sm" id="add-user-btn">Add User</button>
              <button class="btn btn-secondary btn-sm" id="export-users-btn">Export</button>
            </div>
          </div>
          
          <!-- User Stats -->
          <div class="user-stats-grid">
            <div class="user-stat-card">
              <div class="stat-icon">üë§</div>
              <div class="stat-content">
                <div class="stat-number" id="total-users">0</div>
                <div class="stat-label">Total Users</div>
              </div>
            </div>
            
            <div class="user-stat-card">
              <div class="stat-icon">üü¢</div>
              <div class="stat-content">
                <div class="stat-number" id="online-users">0</div>
                <div class="stat-label">Online Now</div>
              </div>
            </div>
            
            <div class="user-stat-card">
              <div class="stat-icon">üìÖ</div>
              <div class="stat-content">
                <div class="stat-number" id="new-users-today">0</div>
                <div class="stat-label">New Today</div>
              </div>
            </div>
            
            <div class="user-stat-card">
              <div class="stat-icon">üí∞</div>
              <div class="stat-content">
                <div class="stat-number" id="avg-balance">$0</div>
                <div class="stat-label">Avg Balance</div>
              </div>
            </div>
          </div>
          
          <!-- User Table -->
          <div class="user-table-card">
            <div class="table-header">
              <h3>User Directory</h3>
              <div class="table-controls">
                <input type="text" class="search-input" id="user-search" placeholder="Search users...">
                <select class="filter-select" id="user-status-filter">
                  <option value="all">All Status</option>
                  <option value="online">Online</option>
                  <option value="offline">Offline</option>
                  <option value="banned">Banned</option>
                </select>
                <button class="btn btn-secondary btn-sm" id="refresh-users">Refresh</button>
              </div>
            </div>
            
            <div class="table-container">
              <table class="data-table" id="users-table">
                <thead>
                  <tr>
                    <th>Username</th>
                    <th>Display Name</th>
                    <th>Balance</th>
                    <th>Status</th>
                    <th>Joined</th>
                    <th>Last Active</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="users-tbody">
                  <tr><td colspan="7" class="no-data">No users found</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>
      </div>
    </main>
  </div>

  <!-- Toast Container -->
  <div id="toast-container" class="toast-container"></div>

  <!-- Scripts -->
  <script src="client.js"></script>
  <script src="admin-enhanced.js"></script>
  <script>
    // Authentication check
    enforceAuthenticatedPage({ page: 'admin' });
  </script>
</body>
</html>
