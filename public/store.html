<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Poker Store - Classic</title>
  <style>
    /* Classic Store Styling */
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
      color: white;
      min-height: 100vh;
      line-height: 1.6;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .header {
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(10px);
      padding: 30px;
      border-radius: 15px;
      margin-bottom: 30px;
      text-align: center;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .header h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      color: #fff;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    }
    
    .header p {
      font-size: 1.1rem;
      color: #ccc;
    }
    
    .section {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      padding: 30px;
      border-radius: 15px;
      margin-bottom: 30px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .section h2 {
      font-size: 1.8rem;
      margin-bottom: 20px;
      text-align: center;
      color: #fff;
    }
    
    .items-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .store-item {
      background: rgba(255, 255, 255, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .store-item:hover {
      background: rgba(255, 255, 255, 0.25);
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
    }
    
    .item-image {
      width: 80px;
      height: 80px;
      margin: 0 auto 15px;
      border-radius: 8px;
      object-fit: contain;
      background: rgba(255, 255, 255, 0.1);
      padding: 10px;
    }
    
    .item-name {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 10px;
      color: #fff;
    }
    
    .item-price {
      font-size: 1.3rem;
      font-weight: bold;
      color: #4CAF50;
      margin-bottom: 15px;
    }
    
    .item-rarity {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      margin-bottom: 10px;
    }
    
    .rarity-common { background: #6c757d; }
    .rarity-uncommon { background: #28a745; }
    .rarity-rare { background: #007bff; }
    .rarity-epic { background: #6f42c1; }
    .rarity-legendary { background: #fd7e14; }
    
    .btn {
      background: linear-gradient(135deg, #4CAF50, #45a049);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .btn:hover {
      background: linear-gradient(135deg, #45a049, #3d8b40);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
    }
    
    .btn:disabled {
      background: #6c757d;
      cursor: not-allowed;
      transform: none;
    }
    
    /* AIC Chip Stack Styles */
    .aic-preview {
      height: 100px;
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 215, 0, 0.3);
      border-radius: 8px;
      margin: 15px 0;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }
    
    .chip-stack {
      position: relative;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .main-stack {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      transform: rotate(-15deg);
    }
    
    .chip {
      width: 40px;
      height: 40px;
      object-fit: contain;
      margin: -5px 0;
      filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.8));
    }
    
    .leaning-chips {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 2px;
    }
    
    .leaning-chip {
      width: 30px;
      height: 30px;
      object-fit: contain;
      filter: drop-shadow(1px 1px 2px rgba(0, 0, 0, 0.8));
    }
    
    .lean-1 { transform: rotate(25deg) translateY(-15px); }
    .lean-2 { transform: rotate(20deg) translateY(-8px); }
    .lean-3 { transform: rotate(15deg); }
    .lean-4 { transform: rotate(10deg) translateY(8px); }
    .lean-5 { transform: rotate(5deg) translateY(15px); }
    
    .loading {
      text-align: center;
      padding: 40px;
      font-size: 1.2rem;
      color: #4CAF50;
    }
    
    .error {
      text-align: center;
      padding: 40px;
      font-size: 1.2rem;
      color: #dc3545;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .container {
        padding: 15px;
      }
      
      .header {
        padding: 20px;
      }
      
      .header h1 {
        font-size: 2rem;
      }
      
      .section {
        padding: 20px;
      }
      
      .items-grid {
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>üÉè Poker Store</h1>
      <p>Customize your poker experience with exclusive cosmetics</p>
    </header>
    
    <div id="loading" class="loading">Loading store...</div>
    
    <section class="section" style="display: none;" id="catalog-section">
      <h2>üõçÔ∏è Catalog Items</h2>
      <div class="items-grid" id="catalog-items">
        <!-- Catalog items will be loaded here -->
      </div>
    </section>
    
    <section class="section" style="display: none;" id="aic-section">
      <h2>ü§ñ AI-Generated Chip Sets</h2>
      <div class="items-grid" id="aic-items">
        <!-- AIC items will be loaded here -->
      </div>
    </section>
  </div>

  <script>
    class ClassicStore {
      constructor() {
        this.catalog = [];
        this.loading = document.getElementById('loading');
        this.catalogSection = document.getElementById('catalog-section');
        this.aicSection = document.getElementById('aic-section');
        this.catalogItems = document.getElementById('catalog-items');
        this.aicItems = document.getElementById('aic-items');
      }
      
      async init() {
        try {
          // Load catalog
          const response = await fetch('/catalog');
          if (!response.ok) throw new Error('Failed to load catalog');
          
          this.catalog = await response.json();
          console.log('Catalog loaded:', this.catalog.length, 'items');
          
          // Render items
          this.renderCatalogItems();
          this.renderAICItems();
          
          // Hide loading, show sections
          this.loading.style.display = 'none';
          this.catalogSection.style.display = 'block';
          this.aicSection.style.display = 'block';
          
        } catch (error) {
          console.error('Store initialization failed:', error);
          this.loading.innerHTML = '<div class="error">Failed to load store. Please refresh.</div>';
        }
      }
      
      renderCatalogItems() {
        const items = this.catalog.slice(0, 12); // Show first 12 items
        
        this.catalogItems.innerHTML = items.map(item => {
          const imageUrl = item.preview || item.image_url || '/logo.png';
          const rarity = item.rarity || 'common';
          
          return `
            <div class="store-item" onclick="classicStore.purchaseItem('${item.id}')">
              <img src="${imageUrl}" alt="${item.name}" class="item-image">
              <div class="item-rarity rarity-${rarity}">${rarity}</div>
              <div class="item-name">${item.name}</div>
              <div class="item-price">${item.price_cents ? '$' + (item.price_cents / 100) : 'FREE'}</div>
              <button class="btn">Purchase</button>
            </div>
          `;
        }).join('');
      }
      
      renderAICItems() {
        const aicItems = [
          { id: 'aic-neon', name: 'Neon Dreams Chip Set', price: 1299, rarity: 'legendary' },
          { id: 'aic-cosmic', name: 'Cosmic Fire Chip Set', price: 1599, rarity: 'legendary' },
          { id: 'aic-electric', name: 'Electric Blue Chip Set', price: 999, rarity: 'epic' }
        ];
        
        this.aicItems.innerHTML = aicItems.map(item => `
          <div class="store-item" onclick="classicStore.purchaseAICPack('${item.id}')">
            <div class="aic-preview">
              <div class="chip-stack">
                <div class="main-stack">
                  <img src="/assets/cosmetics/effects/chips/chip-500-top.png" alt="500" class="chip">
                  <img src="/assets/cosmetics/effects/chips/chip-100-top.png" alt="100" class="chip">
                  <img src="/assets/cosmetics/effects/chips/chip-25-top.png" alt="25" class="chip">
                  <img src="/assets/cosmetics/effects/chips/chip-5-top.png" alt="5" class="chip">
                  <img src="/assets/cosmetics/effects/chips/chip-1-top.png" alt="1" class="chip">
                </div>
                <div class="leaning-chips">
                  <img src="/assets/cosmetics/effects/chips/chip-500-top.png" alt="500" class="leaning-chip lean-1">
                  <img src="/assets/cosmetics/effects/chips/chip-100-top.png" alt="100" class="leaning-chip lean-2">
                  <img src="/assets/cosmetics/effects/chips/chip-25-top.png" alt="25" class="leaning-chip lean-3">
                  <img src="/assets/cosmetics/effects/chips/chip-5-top.png" alt="5" class="leaning-chip lean-4">
                  <img src="/assets/cosmetics/effects/chips/chip-1-top.png" alt="1" class="leaning-chip lean-5">
                </div>
              </div>
            </div>
            <div class="item-rarity rarity-${item.rarity}">${item.rarity}</div>
            <div class="item-name">${item.name}</div>
            <div class="item-price">$${item.price}</div>
            <button class="btn">Generate</button>
          </div>
        `).join('');
      }
      
      purchaseItem(itemId) {
        console.log('Purchase item:', itemId);
        alert('Purchase functionality coming soon!');
      }
      
      purchaseAICPack(packId) {
        console.log('Purchase AIC pack:', packId);
        alert('AI pack generation coming soon!');
      }
    }
    
    // Initialize store
    const classicStore = new ClassicStore();
    classicStore.init();
  </script>
</body>
</html>
